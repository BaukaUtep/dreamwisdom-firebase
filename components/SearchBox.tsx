'use client';import { useEffect, useMemo, useState } from 'react';import Fuse from 'fuse.js';export default function SearchBox({ locale }:{ locale:'en'|'ru'|'kk' }){const [q,setQ]=useState('');const [data,setData]=useState<{slug:string,label:string,meaning:string,category:string}[]>([]);useEffect(()=>{fetch(`/data/dreams_${locale}.json`).then(r=>r.json()).then(setData).catch(()=>setData([]))},[locale]);const fuse=useMemo(()=>new Fuse(data,{keys:['label','meaning','category'],threshold:0.4}),[data]);const results=q.trim()?fuse.search(q).slice(0,50).map(r=>r.item):data.slice(0,100);return(<div><input value={q} onChange={e=>setQ(e.target.value)} placeholder={{en:'Search a symbol',ru:'Поиск по словарю',kk:'Сөздіктен іздеу'}[locale]} className='w-full rounded-2xl border border-gray-300 px-4 py-3 focus:outline-none focus:ring-2 focus:ring-brand-400'/><ul className='mt-4 divide-y divide-gray-100'>{results.map(it=>(<li key={`${it.slug}-${locale}`} className='py-3'><a href={`/${locale}/dream/${it.slug}/`} className='block'><h3 className='font-semibold text-brand-700'>{it.label}</h3><p className='text-sm text-gray-700 line-clamp-2'>{it.meaning}</p></a></li>))}</ul></div>) }