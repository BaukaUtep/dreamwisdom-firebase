import fs from 'node:fs';import path from 'node:path';const SITE_URL=process.env.SITE_URL||'https://example.web.app';const locales=['en','ru','kk'];function getAllSlugs(locale){const p=path.join(process.cwd(),'data',`dreams_${locale}.json`);const list=JSON.parse(fs.readFileSync(p,'utf-8'));return list.map(e=>e.slug)}function url(loc,p){return `${SITE_URL}/${loc}${p.endsWith('/')?p:`${p}/`}`}function build(){const urls=[];for(const loc of locales){urls.push(url(loc,'/'));for (const p of ['/bot/','/blog/','/contacts/']) urls.push(url(loc,p))}for(const loc of locales){const slugs=getAllSlugs(loc);for(const s of slugs) urls.push(url(loc,`/dream/${s}/`))}const now=new Date().toISOString();const xml=`<?xml version="1.0" encoding="UTF-8"?>\n`+`<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">\n`+urls.map(u=>`  <url><loc>${u}</loc><lastmod>${now}</lastmod></url>`).join('\n')+`\n</urlset>`;fs.writeFileSync(path.join(process.cwd(),'out','sitemap.xml'),xml);console.log('sitemap.xml written')}build();